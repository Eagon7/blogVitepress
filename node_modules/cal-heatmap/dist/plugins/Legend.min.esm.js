import{select as t}from"d3-selection";import{timeSecond as n,timeMinute as e,timeHour as r,timeDay as o,timeWeek as i,timeMonth as a,timeYear as c,timeMonday as u,timeTuesday as s,timeWednesday as l,timeThursday as f,timeFriday as d,timeSaturday as p,timeSunday as h,utcSecond as g,utcMinute as v,utcHour as y,utcDay as m,utcWeek as b,utcMonth as w,utcYear as S,utcMonday as j,utcTuesday as $,utcWednesday as O,utcThursday as k,utcFriday as x,utcSaturday as E,utcSunday as M,range as T,color as N,descending as P,ascending as C,schemeAccent as R,schemeCategory10 as I,schemeDark2 as A,schemePaired as D,schemePastel1 as L,schemePastel2 as q,schemeSet1 as F,schemeSet2 as _,schemeSet3 as U,schemeTableau10 as z,quantize as W,interpolateBrBG as B,interpolatePRGn as H,interpolatePiYG as G,interpolatePuOr as V,interpolateRdBu as Y,interpolateRdGy as J,interpolateRdYlBu as K,interpolateRdYlGn as X,interpolateSpectral as Z,interpolateBlues as Q,interpolateGreens as tt,interpolateGreys as nt,interpolatePurples as et,interpolateReds as rt,interpolateOranges as ot,interpolateTurbo as it,interpolateViridis as at,interpolateMagma as ct,interpolateInferno as ut,interpolatePlasma as st,interpolateCividis as lt,interpolateCubehelixDefault as ft,interpolateWarm as dt,interpolateCool as pt,interpolateBuGn as ht,interpolateBuPu as gt,interpolateGnBu as vt,interpolateOrRd as yt,interpolatePuBuGn as mt,interpolatePuBu as bt,interpolatePuRd as wt,interpolateRdPu as St,interpolateYlGnBu as jt,interpolateYlGn as $t,interpolateYlOrBr as Ot,interpolateYlOrRd as kt,interpolateRainbow as xt,interpolateSinebow as Et,schemeBrBG as Mt,schemePRGn as Tt,schemePiYG as Nt,schemePuOr as Pt,schemeRdBu as Ct,schemeRdGy as Rt,schemeRdYlBu as It,schemeRdYlGn as At,schemeSpectral as Dt,schemeBlues as Lt,schemeGreens as qt,schemeGreys as Ft,schemeOranges as _t,schemePurples as Ut,schemeReds as zt,schemeBuGn as Wt,schemeBuPu as Bt,schemeGnBu as Ht,schemeOrRd as Gt,schemePuBu as Vt,schemePuBuGn as Yt,schemePuRd as Jt,schemeRdPu as Kt,schemeYlGn as Xt,schemeYlGnBu as Zt,schemeYlOrBr as Qt,schemeYlOrRd as tn,scaleLinear as nn,scalePow as en,scaleLog as rn,scaleSymlog as on,scaleQuantile as an,extent as cn,ticks as un,interpolateNumber as sn,pairs as ln,reverse as fn,scaleThreshold as dn,scaleIdentity as pn,max as hn,interpolateRgb as gn,interpolateRound as vn,min as yn,quantile as mn,median as bn,interpolateHsl as wn,interpolateHcl as Sn,interpolateLab as jn,scaleDiverging as $n,scaleDivergingPow as On,scaleDivergingLog as kn,scaleDivergingSymlog as xn,piecewise as En,scaleTime as Mn,scaleUtc as Tn,symbolAsterisk as Nn,symbolCircle as Pn,symbolCross as Cn,symbolDiamond as Rn,symbolDiamond2 as In,symbolPlus as An,symbolSquare as Dn,symbolSquare2 as Ln,symbolStar as qn,symbolTimes as Fn,symbolTriangle as _n,symbolTriangle2 as Un,symbolWye as zn,scaleImplicit as Wn,scaleOrdinal as Bn,scalePoint as Hn,scaleBand as Gn,InternSet as Vn,sort as Yn,symbolsStroke as Jn,symbolsFill as Kn,geoPath as Xn,geoTransform as Zn,geoClipRectangle as Qn,geoTransverseMercator as te,geoStereographic as ne,geoOrthographic as ee,geoMercator as re,geoGnomonic as oe,geoEquirectangular as ie,geoEqualEarth as ae,geoAzimuthalEquidistant as ce,geoAzimuthalEqualArea as ue,geoAlbersUsa as se,geoConicEquidistant as le,geoConicEqualArea as fe,geoConicConformal as de,geoAlbers as pe,select as he,creator as ge,utcFormat as ve,format as ye,axisBottom as me,pathRound as be,rgb as we}from"d3";function Se(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,"symbol"==typeof(i=function(t,n){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?i:String(i)),r)}var o,i}var je="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$e=function(t){try{return!!t()}catch(t){return!0}},Oe=!$e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),ke=!$e((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),xe=ke,Ee=Function.prototype,Me=Ee.call,Te=xe&&Ee.bind.bind(Me,Me),Ne=xe?Te:function(t){return function(){return Me.apply(t,arguments)}},Pe=function(t){return null==t},Ce=Pe,Re=TypeError,Ie=function(t){if(Ce(t))throw Re("Can't call method on "+t);return t},Ae=Ie,De=Object,Le=function(t){return De(Ae(t))},qe=Le,Fe=Ne({}.hasOwnProperty),_e=Object.hasOwn||function(t,n){return Fe(qe(t),n)},Ue=Oe,ze=_e,We=Function.prototype,Be=Ue&&Object.getOwnPropertyDescriptor,He=ze(We,"name"),Ge={EXISTS:He,PROPER:He&&"something"===function(){}.name,CONFIGURABLE:He&&(!Ue||Ue&&Be(We,"name").configurable)},Ve={},Ye={get exports(){return Ve},set exports(t){Ve=t}},Je="object"==typeof document&&document.all,Ke={all:Je,IS_HTMLDDA:void 0===Je&&void 0!==Je},Xe=Ke.all,Ze=Ke.IS_HTMLDDA?function(t){return"function"==typeof t||t===Xe}:function(t){return"function"==typeof t},Qe=function(t){return t&&t.Math==Math&&t},tr=Qe("object"==typeof globalThis&&globalThis)||Qe("object"==typeof window&&window)||Qe("object"==typeof self&&self)||Qe("object"==typeof je&&je)||function(){return this}()||Function("return this")(),nr=tr,er=Object.defineProperty,rr=function(t,n){try{er(nr,t,{value:n,configurable:!0,writable:!0})}catch(e){nr[t]=n}return n},or=rr,ir="__core-js_shared__",ar=tr[ir]||or(ir,{}),cr=Ze,ur=ar,sr=Ne(Function.toString);cr(ur.inspectSource)||(ur.inspectSource=function(t){return sr(t)});var lr,fr,dr=ur.inspectSource,pr=Ze,hr=tr.WeakMap,gr=pr(hr)&&/native code/.test(String(hr)),vr=Ze,yr=Ke.all,mr=Ke.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:vr(t)||t===yr}:function(t){return"object"==typeof t?null!==t:vr(t)},br={},wr=mr,Sr=tr.document,jr=wr(Sr)&&wr(Sr.createElement),$r=function(t){return jr?Sr.createElement(t):{}},Or=$r,kr=!Oe&&!$e((function(){return 7!=Object.defineProperty(Or("div"),"a",{get:function(){return 7}}).a})),xr=Oe&&$e((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Er=mr,Mr=String,Tr=TypeError,Nr=function(t){if(Er(t))return t;throw Tr(Mr(t)+" is not an object")},Pr=ke,Cr=Function.prototype.call,Rr=Pr?Cr.bind(Cr):function(){return Cr.apply(Cr,arguments)},Ir=tr,Ar=Ze,Dr=function(t){return Ar(t)?t:void 0},Lr=function(t,n){return arguments.length<2?Dr(Ir[t]):Ir[t]&&Ir[t][n]},qr=Ne({}.isPrototypeOf),Fr="undefined"!=typeof navigator&&String(navigator.userAgent)||"",_r=tr,Ur=Fr,zr=_r.process,Wr=_r.Deno,Br=zr&&zr.versions||Wr&&Wr.version,Hr=Br&&Br.v8;Hr&&(fr=(lr=Hr.split("."))[0]>0&&lr[0]<4?1:+(lr[0]+lr[1])),!fr&&Ur&&(!(lr=Ur.match(/Edge\/(\d+)/))||lr[1]>=74)&&(lr=Ur.match(/Chrome\/(\d+)/))&&(fr=+lr[1]);var Gr=fr,Vr=Gr,Yr=$e,Jr=!!Object.getOwnPropertySymbols&&!Yr((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Vr&&Vr<41})),Kr=Jr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Xr=Lr,Zr=Ze,Qr=qr,to=Object,no=Kr?function(t){return"symbol"==typeof t}:function(t){var n=Xr("Symbol");return Zr(n)&&Qr(n.prototype,to(t))},eo=String,ro=function(t){try{return eo(t)}catch(t){return"Object"}},oo=Ze,io=ro,ao=TypeError,co=function(t){if(oo(t))return t;throw ao(io(t)+" is not a function")},uo=co,so=Pe,lo=function(t,n){var e=t[n];return so(e)?void 0:uo(e)},fo=Rr,po=Ze,ho=mr,go=TypeError,vo={},yo=ar;({get exports(){return vo},set exports(t){vo=t}}.exports=function(t,n){return yo[t]||(yo[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.28.0",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.28.0/LICENSE",source:"https://github.com/zloirock/core-js"});var mo=Ne,bo=0,wo=Math.random(),So=mo(1..toString),jo=function(t){return"Symbol("+(void 0===t?"":t)+")_"+So(++bo+wo,36)},$o=vo,Oo=_e,ko=jo,xo=Jr,Eo=Kr,Mo=tr.Symbol,To=$o("wks"),No=Eo?Mo.for||Mo:Mo&&Mo.withoutSetter||ko,Po=function(t){return Oo(To,t)||(To[t]=xo&&Oo(Mo,t)?Mo[t]:No("Symbol."+t)),To[t]},Co=Rr,Ro=mr,Io=no,Ao=lo,Do=function(t,n){var e,r;if("string"===n&&po(e=t.toString)&&!ho(r=fo(e,t)))return r;if(po(e=t.valueOf)&&!ho(r=fo(e,t)))return r;if("string"!==n&&po(e=t.toString)&&!ho(r=fo(e,t)))return r;throw go("Can't convert object to primitive value")},Lo=TypeError,qo=Po("toPrimitive"),Fo=function(t,n){if(!Ro(t)||Io(t))return t;var e,r=Ao(t,qo);if(r){if(void 0===n&&(n="default"),e=Co(r,t,n),!Ro(e)||Io(e))return e;throw Lo("Can't convert object to primitive value")}return void 0===n&&(n="number"),Do(t,n)},_o=no,Uo=function(t){var n=Fo(t,"string");return _o(n)?n:n+""},zo=Oe,Wo=kr,Bo=xr,Ho=Nr,Go=Uo,Vo=TypeError,Yo=Object.defineProperty,Jo=Object.getOwnPropertyDescriptor,Ko="enumerable",Xo="configurable",Zo="writable";br.f=zo?Bo?function(t,n,e){if(Ho(t),n=Go(n),Ho(e),"function"==typeof t&&"prototype"===n&&"value"in e&&Zo in e&&!e[Zo]){var r=Jo(t,n);r&&r[Zo]&&(t[n]=e.value,e={configurable:Xo in e?e[Xo]:r[Xo],enumerable:Ko in e?e[Ko]:r[Ko],writable:!1})}return Yo(t,n,e)}:Yo:function(t,n,e){if(Ho(t),n=Go(n),Ho(e),Wo)try{return Yo(t,n,e)}catch(t){}if("get"in e||"set"in e)throw Vo("Accessors not supported");return"value"in e&&(t[n]=e.value),t};var Qo,ti,ni,ei=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},ri=br,oi=ei,ii=Oe?function(t,n,e){return ri.f(t,n,oi(1,e))}:function(t,n,e){return t[n]=e,t},ai=jo,ci=vo("keys"),ui={},si=gr,li=tr,fi=mr,di=ii,pi=_e,hi=ar,gi=function(t){return ci[t]||(ci[t]=ai(t))},vi=ui,yi="Object already initialized",mi=li.TypeError,bi=li.WeakMap;if(si||hi.state){var wi=hi.state||(hi.state=new bi);wi.get=wi.get,wi.has=wi.has,wi.set=wi.set,Qo=function(t,n){if(wi.has(t))throw mi(yi);return n.facade=t,wi.set(t,n),n},ti=function(t){return wi.get(t)||{}},ni=function(t){return wi.has(t)}}else{var Si=gi("state");vi[Si]=!0,Qo=function(t,n){if(pi(t,Si))throw mi(yi);return n.facade=t,di(t,Si,n),n},ti=function(t){return pi(t,Si)?t[Si]:{}},ni=function(t){return pi(t,Si)}}var ji={set:Qo,get:ti,has:ni,enforce:function(t){return ni(t)?ti(t):Qo(t,{})},getterFor:function(t){return function(n){var e;if(!fi(n)||(e=ti(n)).type!==t)throw mi("Incompatible receiver, "+t+" required");return e}}},$i=Ne,Oi=$e,ki=Ze,xi=_e,Ei=Oe,Mi=Ge.CONFIGURABLE,Ti=dr,Ni=ji.enforce,Pi=ji.get,Ci=String,Ri=Object.defineProperty,Ii=$i("".slice),Ai=$i("".replace),Di=$i([].join),Li=Ei&&!Oi((function(){return 8!==Ri((function(){}),"length",{value:8}).length})),qi=String(String).split("String"),Fi=Ye.exports=function(t,n,e){"Symbol("===Ii(Ci(n),0,7)&&(n="["+Ai(Ci(n),/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(n="get "+n),e&&e.setter&&(n="set "+n),(!xi(t,"name")||Mi&&t.name!==n)&&(Ei?Ri(t,"name",{value:n,configurable:!0}):t.name=n),Li&&e&&xi(e,"arity")&&t.length!==e.arity&&Ri(t,"length",{value:e.arity});try{e&&xi(e,"constructor")&&e.constructor?Ei&&Ri(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=Ni(t);return xi(r,"source")||(r.source=Di(qi,"string"==typeof n?n:"")),t};Function.prototype.toString=Fi((function(){return ki(this)&&Pi(this).source||Ti(this)}),"toString");var _i=Ve,Ui=br,zi=function(t,n,e){return e.get&&_i(e.get,n,{getter:!0}),e.set&&_i(e.set,n,{setter:!0}),Ui.f(t,n,e)},Wi=Oe,Bi=Ge.EXISTS,Hi=Ne,Gi=zi,Vi=Function.prototype,Yi=Hi(Vi.toString),Ji=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Ki=Hi(Ji.exec);Wi&&!Bi&&Gi(Vi,"name",{configurable:!0,get:function(){try{return Ki(Ji,Yi(this))[1]}catch(t){return""}}});var Xi={},Zi={},Qi={}.propertyIsEnumerable,ta=Object.getOwnPropertyDescriptor,na=ta&&!Qi.call({1:2},1);Zi.f=na?function(t){var n=ta(this,t);return!!n&&n.enumerable}:Qi;var ea=Ne,ra=ea({}.toString),oa=ea("".slice),ia=function(t){return oa(ra(t),8,-1)},aa=$e,ca=ia,ua=Object,sa=Ne("".split),la=aa((function(){return!ua("z").propertyIsEnumerable(0)}))?function(t){return"String"==ca(t)?sa(t,""):ua(t)}:ua,fa=la,da=Ie,pa=function(t){return fa(da(t))},ha=Oe,ga=Rr,va=Zi,ya=ei,ma=pa,ba=Uo,wa=_e,Sa=kr,ja=Object.getOwnPropertyDescriptor;Xi.f=ha?ja:function(t,n){if(t=ma(t),n=ba(n),Sa)try{return ja(t,n)}catch(t){}if(wa(t,n))return ya(!ga(va.f,t,n),t[n])};var $a=Ze,Oa=br,ka=Ve,xa=rr,Ea=function(t,n,e,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:n;if($a(e)&&ka(e,i,r),r.global)o?t[n]=e:xa(n,e);else{try{r.unsafe?t[n]&&(o=!0):delete t[n]}catch(t){}o?t[n]=e:Oa.f(t,n,{value:e,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},Ma={},Ta=Math.ceil,Na=Math.floor,Pa=Math.trunc||function(t){var n=+t;return(n>0?Na:Ta)(n)},Ca=function(t){var n=+t;return n!=n||0===n?0:Pa(n)},Ra=Ca,Ia=Math.max,Aa=Math.min,Da=Ca,La=Math.min,qa=function(t){return t>0?La(Da(t),9007199254740991):0},Fa=function(t){return qa(t.length)},_a=pa,Ua=function(t,n){var e=Ra(t);return e<0?Ia(e+n,0):Aa(e,n)},za=Fa,Wa=function(t){return function(n,e,r){var o,i=_a(n),a=za(i),c=Ua(r,a);if(t&&e!=e){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===e)return t||c||0;return!t&&-1}},Ba={includes:Wa(!0),indexOf:Wa(!1)},Ha=_e,Ga=pa,Va=Ba.indexOf,Ya=ui,Ja=Ne([].push),Ka=function(t,n){var e,r=Ga(t),o=0,i=[];for(e in r)!Ha(Ya,e)&&Ha(r,e)&&Ja(i,e);for(;n.length>o;)Ha(r,e=n[o++])&&(~Va(i,e)||Ja(i,e));return i},Xa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Za=Ka,Qa=Xa.concat("length","prototype");Ma.f=Object.getOwnPropertyNames||function(t){return Za(t,Qa)};var tc={};tc.f=Object.getOwnPropertySymbols;var nc=Lr,ec=Ma,rc=tc,oc=Nr,ic=Ne([].concat),ac=nc("Reflect","ownKeys")||function(t){var n=ec.f(oc(t)),e=rc.f;return e?ic(n,e(t)):n},cc=_e,uc=ac,sc=Xi,lc=br,fc=$e,dc=Ze,pc=/#|\.prototype\./,hc=function(t,n){var e=vc[gc(t)];return e==mc||e!=yc&&(dc(n)?fc(n):!!n)},gc=hc.normalize=function(t){return String(t).replace(pc,".").toLowerCase()},vc=hc.data={},yc=hc.NATIVE="N",mc=hc.POLYFILL="P",bc=hc,wc=tr,Sc=Xi.f,jc=ii,$c=Ea,Oc=rr,kc=function(t,n,e){for(var r=uc(n),o=lc.f,i=sc.f,a=0;a<r.length;a++){var c=r[a];cc(t,c)||e&&cc(e,c)||o(t,c,i(n,c))}},xc=bc,Ec=function(t,n){var e,r,o,i,a,c=t.target,u=t.global,s=t.stat;if(e=u?wc:s?wc[c]||Oc(c,{}):(wc[c]||{}).prototype)for(r in n){if(i=n[r],o=t.dontCallGetSet?(a=Sc(e,r))&&a.value:e[r],!xc(u?r:c+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;kc(i,o)}(t.sham||o&&o.sham)&&jc(i,"sham",!0),$c(e,r,i,t)}},Mc=Ka,Tc=Xa,Nc=Object.keys||function(t){return Mc(t,Tc)},Pc=Oe,Cc=Ne,Rc=Rr,Ic=$e,Ac=Nc,Dc=tc,Lc=Zi,qc=Le,Fc=la,_c=Object.assign,Uc=Object.defineProperty,zc=Cc([].concat),Wc=!_c||Ic((function(){if(Pc&&1!==_c({b:1},_c(Uc({},"a",{enumerable:!0,get:function(){Uc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach((function(t){n[t]=t})),7!=_c({},t)[e]||Ac(_c({},n)).join("")!=r}))?function(t,n){for(var e=qc(t),r=arguments.length,o=1,i=Dc.f,a=Lc.f;r>o;)for(var c,u=Fc(arguments[o++]),s=i?zc(Ac(u),i(u)):Ac(u),l=s.length,f=0;l>f;)c=s[f++],Pc&&!Rc(a,u,c)||(e[c]=u[c]);return e}:_c,Bc=Wc;Ec({target:"Object",stat:!0,arity:2,forced:Object.assign!==Bc},{assign:Bc});var Hc={};Hc[Po("toStringTag")]="z";var Gc="[object z]"===String(Hc),Vc=Gc,Yc=Ze,Jc=ia,Kc=Po("toStringTag"),Xc=Object,Zc="Arguments"==Jc(function(){return arguments}()),Qc=Vc?Jc:function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Xc(t),Kc))?e:Zc?Jc(n):"Object"==(r=Jc(n))&&Yc(n.callee)?"Arguments":r},tu=Qc,nu=Gc?{}.toString:function(){return"[object "+tu(this)+"]"};Gc||Ea(Object.prototype,"toString",nu,{unsafe:!0});var eu="undefined"!=typeof process&&"process"==ia(process),ru=Ne,ou=co,iu=Ze,au=String,cu=TypeError,uu=function(t,n,e){try{return ru(ou(Object.getOwnPropertyDescriptor(t,n)[e]))}catch(t){}},su=Nr,lu=function(t){if("object"==typeof t||iu(t))return t;throw cu("Can't set "+au(t)+" as a prototype")},fu=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,e={};try{(t=uu(Object.prototype,"__proto__","set"))(e,[]),n=e instanceof Array}catch(t){}return function(e,r){return su(e),lu(r),n?t(e,r):e.__proto__=r,e}}():void 0),du=br.f,pu=_e,hu=Po("toStringTag"),gu=Lr,vu=zi,yu=Oe,mu=Po("species"),bu=qr,wu=TypeError,Su=Ne,ju=$e,$u=Ze,Ou=Qc,ku=dr,xu=function(){},Eu=[],Mu=Lr("Reflect","construct"),Tu=/^\s*(?:class|function)\b/,Nu=Su(Tu.exec),Pu=!Tu.exec(xu),Cu=function(t){if(!$u(t))return!1;try{return Mu(xu,Eu,t),!0}catch(t){return!1}},Ru=function(t){if(!$u(t))return!1;switch(Ou(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Pu||!!Nu(Tu,ku(t))}catch(t){return!0}};Ru.sham=!0;var Iu,Au,Du,Lu,qu=!Mu||ju((function(){var t;return Cu(Cu.call)||!Cu(Object)||!Cu((function(){t=!0}))||t}))?Ru:Cu,Fu=qu,_u=ro,Uu=TypeError,zu=Nr,Wu=function(t){if(Fu(t))return t;throw Uu(_u(t)+" is not a constructor")},Bu=Pe,Hu=Po("species"),Gu=ke,Vu=Function.prototype,Yu=Vu.apply,Ju=Vu.call,Ku="object"==typeof Reflect&&Reflect.apply||(Gu?Ju.bind(Yu):function(){return Ju.apply(Yu,arguments)}),Xu=ia,Zu=Ne,Qu=function(t){if("Function"===Xu(t))return Zu(t)},ts=co,ns=ke,es=Qu(Qu.bind),rs=function(t,n){return ts(t),void 0===n?t:ns?es(t,n):function(){return t.apply(n,arguments)}},os=Lr("document","documentElement"),is=Ne([].slice),as=TypeError,cs=/(?:ipad|iphone|ipod).*applewebkit/i.test(Fr),us=tr,ss=Ku,ls=rs,fs=Ze,ds=_e,ps=$e,hs=os,gs=is,vs=$r,ys=function(t,n){if(t<n)throw as("Not enough arguments");return t},ms=cs,bs=eu,ws=us.setImmediate,Ss=us.clearImmediate,js=us.process,$s=us.Dispatch,Os=us.Function,ks=us.MessageChannel,xs=us.String,Es=0,Ms={},Ts="onreadystatechange";ps((function(){Iu=us.location}));var Ns=function(t){if(ds(Ms,t)){var n=Ms[t];delete Ms[t],n()}},Ps=function(t){return function(){Ns(t)}},Cs=function(t){Ns(t.data)},Rs=function(t){us.postMessage(xs(t),Iu.protocol+"//"+Iu.host)};ws&&Ss||(ws=function(t){ys(arguments.length,1);var n=fs(t)?t:Os(t),e=gs(arguments,1);return Ms[++Es]=function(){ss(n,void 0,e)},Au(Es),Es},Ss=function(t){delete Ms[t]},bs?Au=function(t){js.nextTick(Ps(t))}:$s&&$s.now?Au=function(t){$s.now(Ps(t))}:ks&&!ms?(Lu=(Du=new ks).port2,Du.port1.onmessage=Cs,Au=ls(Lu.postMessage,Lu)):us.addEventListener&&fs(us.postMessage)&&!us.importScripts&&Iu&&"file:"!==Iu.protocol&&!ps(Rs)?(Au=Rs,us.addEventListener("message",Cs,!1)):Au=Ts in vs("script")?function(t){hs.appendChild(vs("script"))[Ts]=function(){hs.removeChild(this),Ns(t)}}:function(t){setTimeout(Ps(t),0)});var Is={set:ws,clear:Ss},As=function(){this.head=null,this.tail=null};As.prototype={add:function(t){var n={item:t,next:null},e=this.tail;e?e.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var Ds,Ls,qs,Fs,_s,Us=As,zs=/ipad|iphone|ipod/i.test(Fr)&&"undefined"!=typeof Pebble,Ws=/web0s(?!.*chrome)/i.test(Fr),Bs=tr,Hs=rs,Gs=Xi.f,Vs=Is.set,Ys=Us,Js=cs,Ks=zs,Xs=Ws,Zs=eu,Qs=Bs.MutationObserver||Bs.WebKitMutationObserver,tl=Bs.document,nl=Bs.process,el=Bs.Promise,rl=Gs(Bs,"queueMicrotask"),ol=rl&&rl.value;if(!ol){var il=new Ys,al=function(){var t,n;for(Zs&&(t=nl.domain)&&t.exit();n=il.get();)try{n()}catch(t){throw il.head&&Ds(),t}t&&t.enter()};Js||Zs||Xs||!Qs||!tl?!Ks&&el&&el.resolve?((Fs=el.resolve(void 0)).constructor=el,_s=Hs(Fs.then,Fs),Ds=function(){_s(al)}):Zs?Ds=function(){nl.nextTick(al)}:(Vs=Hs(Vs,Bs),Ds=function(){Vs(al)}):(Ls=!0,qs=tl.createTextNode(""),new Qs(al).observe(qs,{characterData:!0}),Ds=function(){qs.data=Ls=!Ls}),ol=function(t){il.head||Ds(),il.add(t)}}var cl=ol,ul=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},sl=tr.Promise,ll="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,fl=!ll&&!eu&&"object"==typeof window&&"object"==typeof document,dl=tr,pl=sl,hl=Ze,gl=bc,vl=dr,yl=Po,ml=fl,bl=ll,wl=Gr;pl&&pl.prototype;var Sl=yl("species"),jl=!1,$l=hl(dl.PromiseRejectionEvent),Ol=gl("Promise",(function(){var t=vl(pl),n=t!==String(pl);if(!n&&66===wl)return!0;if(!wl||wl<51||!/native code/.test(t)){var e=new pl((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((e.constructor={})[Sl]=r,!(jl=e.then((function(){}))instanceof r))return!0}return!n&&(ml||bl)&&!$l})),kl={CONSTRUCTOR:Ol,REJECTION_EVENT:$l,SUBCLASSING:jl},xl={},El=co,Ml=TypeError,Tl=function(t){var n,e;this.promise=new t((function(t,r){if(void 0!==n||void 0!==e)throw Ml("Bad Promise constructor");n=t,e=r})),this.resolve=El(n),this.reject=El(e)};xl.f=function(t){return new Tl(t)};var Nl,Pl,Cl,Rl=Ec,Il=eu,Al=tr,Dl=Rr,Ll=Ea,ql=fu,Fl=function(t,n,e){t&&!e&&(t=t.prototype),t&&!pu(t,hu)&&du(t,hu,{configurable:!0,value:n})},_l=function(t){var n=gu(t);yu&&n&&!n[mu]&&vu(n,mu,{configurable:!0,get:function(){return this}})},Ul=co,zl=Ze,Wl=mr,Bl=function(t,n){if(bu(n,t))return t;throw wu("Incorrect invocation")},Hl=function(t,n){var e,r=zu(t).constructor;return void 0===r||Bu(e=zu(r)[Hu])?n:Wu(e)},Gl=Is.set,Vl=cl,Yl=function(t,n){try{1==arguments.length?console.error(t):console.error(t,n)}catch(t){}},Jl=ul,Kl=Us,Xl=ji,Zl=sl,Ql=xl,tf="Promise",nf=kl.CONSTRUCTOR,ef=kl.REJECTION_EVENT,rf=kl.SUBCLASSING,of=Xl.getterFor(tf),af=Xl.set,cf=Zl&&Zl.prototype,uf=Zl,sf=cf,lf=Al.TypeError,ff=Al.document,df=Al.process,pf=Ql.f,hf=pf,gf=!!(ff&&ff.createEvent&&Al.dispatchEvent),vf="unhandledrejection",yf=function(t){var n;return!(!Wl(t)||!zl(n=t.then))&&n},mf=function(t,n){var e,r,o,i=n.value,a=1==n.state,c=a?t.ok:t.fail,u=t.resolve,s=t.reject,l=t.domain;try{c?(a||(2===n.rejection&&$f(n),n.rejection=1),!0===c?e=i:(l&&l.enter(),e=c(i),l&&(l.exit(),o=!0)),e===t.promise?s(lf("Promise-chain cycle")):(r=yf(e))?Dl(r,e,u,s):u(e)):s(i)}catch(t){l&&!o&&l.exit(),s(t)}},bf=function(t,n){t.notified||(t.notified=!0,Vl((function(){for(var e,r=t.reactions;e=r.get();)mf(e,t);t.notified=!1,n&&!t.rejection&&Sf(t)})))},wf=function(t,n,e){var r,o;gf?((r=ff.createEvent("Event")).promise=n,r.reason=e,r.initEvent(t,!1,!0),Al.dispatchEvent(r)):r={promise:n,reason:e},!ef&&(o=Al["on"+t])?o(r):t===vf&&Yl("Unhandled promise rejection",e)},Sf=function(t){Dl(Gl,Al,(function(){var n,e=t.facade,r=t.value;if(jf(t)&&(n=Jl((function(){Il?df.emit("unhandledRejection",r,e):wf(vf,e,r)})),t.rejection=Il||jf(t)?2:1,n.error))throw n.value}))},jf=function(t){return 1!==t.rejection&&!t.parent},$f=function(t){Dl(Gl,Al,(function(){var n=t.facade;Il?df.emit("rejectionHandled",n):wf("rejectionhandled",n,t.value)}))},Of=function(t,n,e){return function(r){t(n,r,e)}},kf=function(t,n,e){t.done||(t.done=!0,e&&(t=e),t.value=n,t.state=2,bf(t,!0))},xf=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw lf("Promise can't be resolved itself");var r=yf(n);r?Vl((function(){var e={done:!1};try{Dl(r,n,Of(xf,e,t),Of(kf,e,t))}catch(n){kf(e,n,t)}})):(t.value=n,t.state=1,bf(t,!1))}catch(n){kf({done:!1},n,t)}}};if(nf&&(sf=(uf=function(t){Bl(this,sf),Ul(t),Dl(Nl,this);var n=of(this);try{t(Of(xf,n),Of(kf,n))}catch(t){kf(n,t)}}).prototype,(Nl=function(t){af(this,{type:tf,done:!1,notified:!1,parent:!1,reactions:new Kl,rejection:!1,state:0,value:void 0})}).prototype=Ll(sf,"then",(function(t,n){var e=of(this),r=pf(Hl(this,uf));return e.parent=!0,r.ok=!zl(t)||t,r.fail=zl(n)&&n,r.domain=Il?df.domain:void 0,0==e.state?e.reactions.add(r):Vl((function(){mf(r,e)})),r.promise})),Pl=function(){var t=new Nl,n=of(t);this.promise=t,this.resolve=Of(xf,n),this.reject=Of(kf,n)},Ql.f=pf=function(t){return t===uf||undefined===t?new Pl(t):hf(t)},zl(Zl)&&cf!==Object.prototype)){Cl=cf.then,rf||Ll(cf,"then",(function(t,n){var e=this;return new uf((function(t,n){Dl(Cl,e,t,n)})).then(t,n)}),{unsafe:!0});try{delete cf.constructor}catch(t){}ql&&ql(cf,sf)}Rl({global:!0,constructor:!0,wrap:!0,forced:nf},{Promise:uf}),Fl(uf,tf,!1),_l(tf);var Ef={},Mf=Ef,Tf=Po("iterator"),Nf=Array.prototype,Pf=Qc,Cf=lo,Rf=Pe,If=Ef,Af=Po("iterator"),Df=function(t){if(!Rf(t))return Cf(t,Af)||Cf(t,"@@iterator")||If[Pf(t)]},Lf=Rr,qf=co,Ff=Nr,_f=ro,Uf=Df,zf=TypeError,Wf=Rr,Bf=Nr,Hf=lo,Gf=rs,Vf=Rr,Yf=Nr,Jf=ro,Kf=function(t){return void 0!==t&&(Mf.Array===t||Nf[Tf]===t)},Xf=Fa,Zf=qr,Qf=function(t,n){var e=arguments.length<2?Uf(t):n;if(qf(e))return Ff(Lf(e,t));throw zf(_f(t)+" is not iterable")},td=Df,nd=function(t,n,e){var r,o;Bf(t);try{if(!(r=Hf(t,"return"))){if("throw"===n)throw e;return e}r=Wf(r,t)}catch(t){o=!0,r=t}if("throw"===n)throw e;if(o)throw r;return Bf(r),e},ed=TypeError,rd=function(t,n){this.stopped=t,this.result=n},od=rd.prototype,id=function(t,n,e){var r,o,i,a,c,u,s,l=e&&e.that,f=!(!e||!e.AS_ENTRIES),d=!(!e||!e.IS_RECORD),p=!(!e||!e.IS_ITERATOR),h=!(!e||!e.INTERRUPTED),g=Gf(n,l),v=function(t){return r&&nd(r,"normal",t),new rd(!0,t)},y=function(t){return f?(Yf(t),h?g(t[0],t[1],v):g(t[0],t[1])):h?g(t,v):g(t)};if(d)r=t.iterator;else if(p)r=t;else{if(!(o=td(t)))throw ed(Jf(t)+" is not iterable");if(Kf(o)){for(i=0,a=Xf(t);a>i;i++)if((c=y(t[i]))&&Zf(od,c))return c;return new rd(!1)}r=Qf(t,o)}for(u=d?t.next:r.next;!(s=Vf(u,r)).done;){try{c=y(s.value)}catch(t){nd(r,"throw",t)}if("object"==typeof c&&c&&Zf(od,c))return c}return new rd(!1)},ad=Po("iterator"),cd=!1;try{var ud=0,sd={next:function(){return{done:!!ud++}},return:function(){cd=!0}};sd[ad]=function(){return this},Array.from(sd,(function(){throw 2}))}catch(t){}var ld=sl,fd=function(t,n){if(!n&&!cd)return!1;var e=!1;try{var r={};r[ad]=function(){return{next:function(){return{done:e=!0}}}},t(r)}catch(t){}return e},dd=kl.CONSTRUCTOR||!fd((function(t){ld.all(t).then(void 0,(function(){}))})),pd=Rr,hd=co,gd=xl,vd=ul,yd=id;Ec({target:"Promise",stat:!0,forced:dd},{all:function(t){var n=this,e=gd.f(n),r=e.resolve,o=e.reject,i=vd((function(){var e=hd(n.resolve),i=[],a=0,c=1;yd(t,(function(t){var u=a++,s=!1;c++,pd(e,n,t).then((function(t){s||(s=!0,i[u]=t,--c||r(i))}),o)})),--c||r(i)}));return i.error&&o(i.value),e.promise}});var md=Ec,bd=kl.CONSTRUCTOR,wd=sl,Sd=Lr,jd=Ze,$d=Ea,Od=wd&&wd.prototype;if(md({target:"Promise",proto:!0,forced:bd,real:!0},{catch:function(t){return this.then(void 0,t)}}),jd(wd)){var kd=Sd("Promise").prototype.catch;Od.catch!==kd&&$d(Od,"catch",kd,{unsafe:!0})}var xd=Rr,Ed=co,Md=xl,Td=ul,Nd=id;Ec({target:"Promise",stat:!0,forced:dd},{race:function(t){var n=this,e=Md.f(n),r=e.reject,o=Td((function(){var o=Ed(n.resolve);Nd(t,(function(t){xd(o,n,t).then(e.resolve,r)}))}));return o.error&&r(o.value),e.promise}});var Pd=Rr,Cd=xl;Ec({target:"Promise",stat:!0,forced:kl.CONSTRUCTOR},{reject:function(t){var n=Cd.f(this);return Pd(n.reject,void 0,t),n.promise}});var Rd=Nr,Id=mr,Ad=xl,Dd=Ec,Ld=kl.CONSTRUCTOR,qd=function(t,n){if(Rd(t),Id(n)&&n.constructor===t)return n;var e=Ad.f(t);return(0,e.resolve)(n),e.promise};function Fd(t,n){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return"function"==typeof n?n(t):n;const e=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return`${a=t.getUTCFullYear(),a<0?`-${_d(-a,6)}`:a>9999?`+${_d(a,6)}`:_d(a,4)}-${_d(t.getUTCMonth()+1,2)}-${_d(t.getUTCDate(),2)}${e||r||o||i?`T${_d(e,2)}:${_d(r,2)}${o||i?`:${_d(o,2)}${i?`.${_d(i,3)}`:""}`:""}Z`:""}`;var a}function _d(t,n){return`${t}`.padStart(n,"0")}Lr("Promise"),Dd({target:"Promise",stat:!0,forced:Ld},{resolve:function(t){return qd(this,t)}});const Ud=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function zd(t,n){return Ud.test(t+="")?new Date(t):"function"==typeof n?n(t):n}const Wd=new Map([["second",n],["minute",e],["hour",r],["day",o],["week",i],["month",a],["year",c],["monday",u],["tuesday",s],["wednesday",l],["thursday",f],["friday",d],["saturday",p],["sunday",h]]),Bd=new Map([["second",g],["minute",v],["hour",y],["day",m],["week",b],["month",w],["year",S],["monday",j],["tuesday",$],["wednesday",O],["thursday",k],["friday",x],["saturday",E],["sunday",M]]);function Hd(t){const n=Wd.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown interval: ${t}`);return n}function Gd(t){const n=Bd.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown interval: ${t}`);return n}const Vd=Object.getPrototypeOf(Uint8Array),Yd=Object.prototype.toString,Jd=t=>null==t?t:`${t}`,Kd=t=>()=>t;function Xd(t,n){return void 0===t&&(t=n),null===t?[void 0,"none"]:lp(t)?[void 0,t]:[t,void 0]}function Zd(t,n){return void 0===t&&(t=n),null===t||"number"==typeof t?[void 0,t]:[t,void 0]}function Qd(t,n){return null==t?t:void 0===n?t instanceof Array||t instanceof Vd?t:Array.from(t):t instanceof n?t:n.from(t)}function tp(t,n,e=Array){return t instanceof e?t.map(n):e.from(t,n)}function np(t){return t?.toString===Yd}function ep(t){return np(t)&&(void 0!==t.type||void 0!==t.domain)}function rp(t,n){if(null!=t){if("number"==typeof t){const n=t;return{floor:t=>n*Math.floor(t/n),offset:t=>t+n,range:(t,e)=>T(Math.ceil(t/n),e/n).map((t=>n*t))}}if("string"==typeof t)return("time"===n?Hd:Gd)(t);if("function"!=typeof t.floor)throw new Error("invalid interval; missing floor method");if("function"!=typeof t.offset)throw new Error("invalid interval; missing offset method");return t}}function op(t){for(const n of t){if(null==n)continue;const t=typeof n;return"string"===t||"boolean"===t}}function ip(t){for(const n of t)if(null!=n)return n instanceof Date}function ap(t){for(const n of t)if(null!=n)return"string"==typeof n&&isNaN(n)&&zd(n)}function cp(t){for(const n of t)if(null!=n){if("string"!=typeof n)return!1;if(n.trim())return!isNaN(n)}}function up(t,n){for(const e of t)if(null!=e)return n(e)}function sp(t,n){for(const e of t)if(null!=e&&!n(e))return!1;return!0}function lp(t){return"string"==typeof t&&("none"===(t=t.toLowerCase().trim())||"currentcolor"===t||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||null!==N(t))}function fp(t){return null==t||function(t){return/^\s*none\s*$/i.test(t)}(t)}function dp(t){if(null==t)return;const n=t[0],e=t[t.length-1];return P(n,e)}const pp=Symbol("position"),hp=Symbol("color"),gp=Symbol("radius"),vp=Symbol("length"),yp=Symbol("opacity"),mp=Symbol("symbol"),bp=new Map([["x",pp],["y",pp],["fx",pp],["fy",pp],["r",gp],["color",hp],["opacity",yp],["symbol",mp],["length",vp]]);function wp(t){return null!=t&&!Number.isNaN(t)}function Sp(t,n){return+wp(n)-+wp(t)||C(t,n)}function jp(t){return isFinite(t)?t:NaN}function $p(t){return t>0&&isFinite(t)?t:NaN}function Op(t){return t<0&&isFinite(t)?t:NaN}const kp=new Map([["accent",R],["category10",I],["dark2",A],["paired",D],["pastel1",L],["pastel2",q],["set1",F],["set2",_],["set3",U],["tableau10",z],["brbg",Ep(Mt,B)],["prgn",Ep(Tt,H)],["piyg",Ep(Nt,G)],["puor",Ep(Pt,V)],["rdbu",Ep(Ct,Y)],["rdgy",Ep(Rt,J)],["rdylbu",Ep(It,K)],["rdylgn",Ep(At,X)],["spectral",Ep(Dt,Z)],["burd",Mp(Ct,Y)],["buylrd",Mp(It,K)],["blues",xp(Lt,Q)],["greens",xp(qt,tt)],["greys",xp(Ft,nt)],["oranges",xp(_t,ot)],["purples",xp(Ut,et)],["reds",xp(zt,rt)],["turbo",Tp(it)],["viridis",Tp(at)],["magma",Tp(ct)],["inferno",Tp(ut)],["plasma",Tp(st)],["cividis",Tp(lt)],["cubehelix",Tp(ft)],["warm",Tp(dt)],["cool",Tp(pt)],["bugn",xp(Wt,ht)],["bupu",xp(Bt,gt)],["gnbu",xp(Ht,vt)],["orrd",xp(Gt,yt)],["pubu",xp(Vt,bt)],["pubugn",xp(Yt,mt)],["purd",xp(Jt,wt)],["rdpu",xp(Kt,St)],["ylgn",xp(Xt,$t)],["ylgnbu",xp(Zt,jt)],["ylorbr",xp(Qt,Ot)],["ylorrd",xp(tn,kt)],["rainbow",Np(xt)],["sinebow",Np(Et)]]);function xp(t,n){return({length:e})=>1===e?[t[3][1]]:2===e?[t[3][1],t[3][2]]:(e=Math.max(3,Math.floor(e)))>9?W(n,e):t[e]}function Ep(t,n){return({length:e})=>2===e?[t[3][0],t[3][2]]:(e=Math.max(3,Math.floor(e)))>11?W(n,e):t[e]}function Mp(t,n){return({length:e})=>2===e?[t[3][2],t[3][0]]:(e=Math.max(3,Math.floor(e)))>11?W((t=>n(1-t)),e):t[e].slice().reverse()}function Tp(t){return({length:n})=>W(t,Math.max(2,Math.floor(n)))}function Np(t){return({length:n})=>W(t,Math.floor(n)+1).slice(0,-1)}function Pp(t){const n=`${t}`.toLowerCase();if(!kp.has(n))throw new Error(`unknown ordinal scheme: ${n}`);return kp.get(n)}function Cp(t,n){const e=Pp(t),r="function"==typeof e?e({length:n}):e;return r.length!==n?r.slice(0,n):r}const Rp=new Map([["brbg",B],["prgn",H],["piyg",G],["puor",V],["rdbu",Y],["rdgy",J],["rdylbu",K],["rdylgn",X],["spectral",Z],["burd",t=>Y(1-t)],["buylrd",t=>K(1-t)],["blues",Q],["greens",tt],["greys",nt],["purples",et],["reds",rt],["oranges",ot],["turbo",it],["viridis",at],["magma",ct],["inferno",ut],["plasma",st],["cividis",lt],["cubehelix",ft],["warm",dt],["cool",pt],["bugn",ht],["bupu",gt],["gnbu",vt],["orrd",yt],["pubugn",mt],["pubu",bt],["purd",wt],["rdpu",St],["ylgnbu",jt],["ylgn",$t],["ylorbr",Ot],["ylorrd",kt],["rainbow",xt],["sinebow",Et]]);function Ip(t){const n=`${t}`.toLowerCase();if(!Rp.has(n))throw new Error(`unknown quantitative scheme: ${n}`);return Rp.get(n)}const Ap=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Dp(t){return null!=t&&Ap.has(`${t}`.toLowerCase())}const Lp=t=>n=>t(1-n),qp=[0,1],Fp=new Map([["number",sn],["rgb",gn],["hsl",wn],["hcl",Sn],["lab",jn]]);function _p(t){const n=`${t}`.toLowerCase();if(!Fp.has(n))throw new Error(`unknown interpolator: ${n}`);return Fp.get(n)}function Up(t,n,e,{type:r,nice:o,clamp:i,zero:a,domain:c=Hp(t,e),unknown:u,round:s,scheme:l,interval:f,range:d=(bp.get(t)===gp?Vp(e,c):bp.get(t)===vp?Yp(e,c):bp.get(t)===yp?qp:void 0),interpolate:p=(bp.get(t)===hp?null==l&&void 0!==d?gn:Ip(void 0!==l?l:"cyclical"===r?"rainbow":"turbo"):s?vn:sn),reverse:h}){if(f=rp(f,r),"cyclical"!==r&&"sequential"!==r||(r="linear"),h=!!h,"function"!=typeof p&&(p=_p(p)),1===p.length?(h&&(p=Lp(p),h=!1),void 0===d&&2===(d=Float64Array.from(c,((t,n)=>n/(c.length-1)))).length&&(d=qp),n.interpolate((d===qp?Kd:Xp)(p))):n.interpolate(p),a){const[t,n]=cn(c);(t>0||n<0)&&(c=function(t,n=Array){return t instanceof n?t.slice():n.from(t)}(c),dp(c)!==Math.sign(t)?c[c.length-1]=0:c[0]=0)}return h&&(c=fn(c)),n.domain(c).unknown(u),o&&(n.nice(!0===o?void 0:o),c=n.domain()),void 0!==d&&n.range(d),i&&n.clamp(i),{type:r,domain:c,range:d,scale:n,interpolate:p,interval:f}}function zp(t,n,{exponent:e=1,...r}){return Up(t,en().exponent(e),n,{...r,type:"pow"})}function Wp(t,n,{domain:e=[0],unknown:r,scheme:o="rdylbu",interpolate:i,range:a=(void 0!==i?W(i,e.length+1):bp.get(t)===hp?Cp(o,e.length+1):void 0),reverse:c}){const u=dp(Qd(e));if(!ln(e).every((([t,n])=>function(t,n,e){const r=P(t,n);return 0===r||r===e}(t,n,u))))throw new Error(`the ${t} scale has a non-monotonic domain`);return c&&(a=fn(a)),{type:"threshold",scale:dn(u<0?fn(e):e,void 0===a?[]:a).unknown(r),domain:e,range:a}}function Bp(t,n=jp){return t.length?[yn(t,(({value:t})=>void 0===t?t:yn(t,n))),hn(t,(({value:t})=>void 0===t?t:hn(t,n)))]:[0,1]}function Hp(t,n){const e=bp.get(t);return(e===gp||e===yp||e===vp?Gp:Bp)(n)}function Gp(t){return[0,t.length?hn(t,(({value:t})=>void 0===t?t:hn(t,jp))):1]}function Vp(t,n){const e=t.find((({radius:t})=>void 0!==t));if(void 0!==e)return[0,e.radius];const r=mn(t,.5,(({value:t})=>void 0===t?NaN:mn(t,.25,$p))),o=n.map((t=>3*Math.sqrt(t/r))),i=30/hn(o);return i<1?o.map((t=>t*i)):o}function Yp(t,n){const e=bn(t,(({value:t})=>void 0===t?NaN:bn(t,Math.abs))),r=n.map((t=>12*t/e)),o=60/hn(r);return o<1?r.map((t=>t*o)):r}function Jp(t){for(const{value:n}of t)if(void 0!==n)for(let e of n){if(e=+e,e>0)return Bp(t,$p);if(e<0)return Bp(t,Op)}return[1,10]}function Kp(t){const n=[];for(const{value:e}of t)if(void 0!==e)for(const t of e)n.push(t);return n}function Xp(t){return(n,e)=>r=>t(n+r*(e-n))}function Zp(t,n,e,r,{type:o,nice:i,clamp:a,domain:c=Bp(r),unknown:u,pivot:s=0,scheme:l,range:f,symmetric:d=!0,interpolate:p=(bp.get(t)===hp?null==l&&void 0!==f?gn:Ip(void 0!==l?l:"rdbu"):sn),reverse:h}){s=+s;let[g,v]=c;if(P(g,v)<0&&([g,v]=[v,g],h=!h),g=Math.min(g,s),v=Math.max(v,s),"function"!=typeof p&&(p=_p(p)),void 0!==f&&(p=1===p.length?Xp(p)(...f):En(p,f)),h&&(p=Lp(p)),d){const t=e.apply(s),n=t-e.apply(g),r=e.apply(v)-t;n<r?g=e.invert(t-r):n>r&&(v=e.invert(t+n))}return n.domain([g,s,v]).unknown(u).interpolator(p),a&&n.clamp(a),i&&n.nice(i),{type:o,domain:[g,v],pivot:s,interpolate:p,scale:n}}function Qp(t,n,{exponent:e=1,...r}){return Zp(t,On().exponent(e=+e),function(t){return.5===t?rh:{apply:n=>Math.sign(n)*Math.pow(Math.abs(n),t),invert:n=>Math.sign(n)*Math.pow(Math.abs(n),1/t)}}(e),n,{...r,type:"diverging-pow"})}function th(t,n,{constant:e=1,...r}){return Zp(t,xn().constant(e=+e),function(t){return{apply:n=>Math.sign(n)*Math.log1p(Math.abs(n/t)),invert:n=>Math.sign(n)*Math.expm1(Math.abs(n))*t}}(e),n,r)}const nh={apply:t=>t,invert:t=>t},eh={apply:Math.log,invert:Math.exp},rh={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function oh(t,n,e,r){return Up(t,n,e,r)}const ih=2/Math.sqrt(3),ah=new Map([["asterisk",Nn],["circle",Pn],["cross",Cn],["diamond",Rn],["diamond2",In],["hexagon",{draw(t,n){const e=Math.sqrt(n/Math.PI),r=e*ih,o=r/2;t.moveTo(0,r),t.lineTo(e,o),t.lineTo(e,-o),t.lineTo(0,-r),t.lineTo(-e,-o),t.lineTo(-e,o),t.closePath()}}],["plus",An],["square",Dn],["square2",Ln],["star",qn],["times",Fn],["triangle",_n],["triangle2",Un],["wye",zn]]);function ch(t){return t&&"function"==typeof t.draw}function uh(t){return!!ch(t)||"string"==typeof t&&ah.has(t.toLowerCase())}function sh(t){if(null==t||ch(t))return t;const n=ah.get(`${t}`.toLowerCase());if(n)return n;throw new Error(`invalid symbol: ${t}`)}const lh=Symbol("ordinal");function fh(t,n,e,{type:r,interval:o,domain:i,range:a,reverse:c,hint:u}){return o=rp(o,r),void 0===i&&(i=hh(e,o,t)),"categorical"!==r&&r!==lh||(r="ordinal"),c&&(i=fn(i)),n.domain(i),void 0!==a&&("function"==typeof a&&(a=a(i)),n.range(a)),{type:r,domain:i,range:a,scale:n,hint:u,interval:o}}function dh(t,n,{type:e,interval:r,domain:o,range:i,scheme:a,unknown:c,...u}){let s;if(r=rp(r,e),void 0===o&&(o=hh(n,r,t)),bp.get(t)===mp)s=function(t){return{fill:gh(t,"fill"),stroke:gh(t,"stroke")}}(n),i=void 0===i?function(t){return fp(t.fill)?Jn:Kn}(s):tp(i,sh);else if(bp.get(t)===hp&&(void 0!==i||"ordinal"!==e&&e!==lh||(i=function(t,n="greys"){const e=new Set,[r,o]=Cp(n,2);for(const n of t)if(null!=n)if(!0===n)e.add(o);else{if(!1!==n)return;e.add(r)}return[...e]}(o,a),void 0!==i&&(a=void 0)),void 0===a&&void 0===i&&(a="ordinal"===e?"turbo":"tableau10"),void 0!==a))if(void 0!==i){const t=Ip(a),n=i[0],e=i[1]-i[0];i=({length:r})=>W((r=>t(n+e*r)),r)}else i=Pp(a);if(c===Wn)throw new Error("implicit unknown is not supported");return fh(t,Bn().unknown(c),n,{...u,type:e,domain:o,range:i,hint:s})}function ph(t,n,e,r){let{round:o}=e;return void 0!==o&&t.round(o=!!o),(t=fh(r,t,n,e)).round=o,t}function hh(t,n,e){const r=new Vn;for(const{value:n,domain:e}of t){if(void 0!==e)return e();if(void 0!==n)for(const t of n)r.add(t)}if(void 0!==n){const[t,e]=cn(r).map(n.floor,n);return n.range(t,n.offset(e))}if(r.size>1e4&&bp.get(e)===pp)throw new Error("implicit ordinal position domain has more than 10,000 values");return Yn(r,Sp)}function gh(t,n){let e;for(const{hint:r}of t){const t=r?.[n];if(void 0!==t)if(void 0===e)e=t;else if(e!==t)return}return e}function vh(t){console.warn(t)}function yh(t,n,e){return function(t,n=[],e={}){const r=function(t,n,{type:e,domain:r,range:o,scheme:i,pivot:a,projection:c}){if("fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==c||(e=bh);for(const{type:t}of n)if(void 0!==t)if(void 0===e)e=t;else if(e!==t)throw new Error(`scale incompatible with channel: ${e} !== ${t}`);if(e===bh)return;if(void 0!==e)return e;if(void 0===r&&!n.some((({value:t})=>void 0!==t)))return;const u=bp.get(t);if(u===hp&&void 0===o&&void 0===i&&Sh(r,n,lp))return"identity";if(u===mp&&void 0===o&&Sh(r,n,uh))return"identity";if(u===gp)return"sqrt";if(u===yp||u===vp)return"linear";if(u===mp)return"ordinal";if((r||o||[]).length>2)return wh(u);if(void 0!==r)return op(r)?wh(u):ip(r)?"utc":u!==hp||null==a&&!Dp(i)?"linear":"diverging";const s=n.map((({value:t})=>t)).filter((t=>void 0!==t));return s.some(op)?wh(u):s.some(ip)?"utc":u!==hp||null==a&&!Dp(i)?"linear":"diverging"}(t,n,e);if(void 0===e.type&&void 0===e.domain&&void 0===e.range&&null==e.interval&&"fx"!==t&&"fy"!==t&&jh({type:r})){const e=n.map((({value:t})=>t)).filter((t=>void 0!==t));e.some(ip)?vh(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${mh(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${mh(r)}".`):e.some(ap)?vh(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${mh(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${mh(r)}".`):e.some(cp)&&vh(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${mh(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${mh(r)}".`)}switch(e.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":e=$h(n,e,xh);break;case"identity":switch(bp.get(t)){case pp:e=$h(n,e,xh);break;case mp:e=$h(n,e,Oh)}break;case"utc":case"time":e=$h(n,e,kh)}switch(r){case"diverging":return function(t,n,e){return Zp(t,$n(),nh,n,e)}(t,n,e);case"diverging-sqrt":return function(t,n,e){return Qp(t,n,{...e,exponent:.5})}(t,n,e);case"diverging-pow":return Qp(t,n,e);case"diverging-log":return function(t,n,{base:e=10,pivot:r=1,domain:o=Bp(n,r<0?Op:$p),...i}){return Zp(t,kn().base(e=+e),eh,n,{domain:o,pivot:r,...i})}(t,n,e);case"diverging-symlog":return th(t,n,e);case"categorical":case"ordinal":case lh:return dh(t,n,e);case"cyclical":case"sequential":case"linear":return function(t,n,e){return Up(t,nn(),n,e)}(t,n,e);case"sqrt":return function(t,n,e){return zp(t,n,{...e,exponent:.5})}(t,n,e);case"threshold":return Wp(t,0,e);case"quantile":return function(t,n,{range:e,quantiles:r=(void 0===e?5:(e=[...e]).length),n:o=r,scheme:i="rdylbu",domain:a=Kp(n),interpolate:c,reverse:u}){return void 0===e&&(e=void 0!==c?W(c,o):bp.get(t)===hp?Cp(i,o):void 0),a.length>0&&(a=an(a,void 0===e?{length:o}:e).quantiles()),Wp(t,0,{domain:a,range:e,reverse:u})}(t,n,e);case"quantize":return function(t,n,{range:e,n:r=(void 0===e?5:(e=[...e]).length),scheme:o="rdylbu",domain:i=Hp(t,n),unknown:a,interpolate:c,reverse:u}){const[s,l]=cn(i);let f;return void 0===e?(f=un(s,l,r),f[0]<=s&&f.splice(0,1),f[f.length-1]>=l&&f.pop(),r=f.length+1,e=void 0!==c?W(c,r):bp.get(t)===hp?Cp(o,r):void 0):(f=W(sn(s,l),r+1).slice(1,-1),s instanceof Date&&(f=f.map((t=>new Date(t))))),dp(Qd(i))<0&&f.reverse(),Wp(t,0,{domain:f,range:e,reverse:u,unknown:a})}(t,n,e);case"pow":return zp(t,n,e);case"log":return function(t,n,{base:e=10,domain:r=Jp(n),...o}){return Up(t,rn().base(e),n,{...o,domain:r})}(t,n,e);case"symlog":return function(t,n,{constant:e=1,...r}){return Up(t,on().constant(e),n,r)}(t,n,e);case"utc":return function(t,n,e){return oh(t,Tn(),n,e)}(t,n,e);case"time":return function(t,n,e){return oh(t,Mn(),n,e)}(t,n,e);case"point":return function(t,n,{align:e=.5,padding:r=.5,...o}){return ph(Hn().align(e).padding(r),n,o,t)}(t,n,e);case"band":return function(t,n,{align:e=.5,padding:r=.1,paddingInner:o=r,paddingOuter:i=("fx"===t||"fy"===t?0:r),...a}){return ph(Gn().align(e).paddingInner(o).paddingOuter(i),n,a,t)}(t,n,e);case"identity":return bp.get(t)===pp?{type:"identity",scale:pn()}:{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}(t,void 0===e?void 0:[{hint:e}],{...n})}function mh(t){return"symbol"==typeof t?t.description:t}const bh={toString:()=>"projection"};function wh(t){switch(t){case pp:return"point";case hp:return lh;default:return"ordinal"}}function Sh(t,n,e){return void 0!==t?up(t,e)&&sp(t,e):n.some((({value:t})=>void 0!==t&&up(t,e)))&&n.every((({value:t})=>void 0===t||sp(t,e)))}function jh({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===lh}function $h(t,{domain:n,...e},r){for(const n of t)void 0!==n.value&&(n.value=r(n.value));return{domain:void 0===n?n:r(n),...e}}function Oh(t){return tp(t,sh)}function kh(t){return tp(t,Mh)}function xh(t){return function(t){return t instanceof Vd}(t)?t:tp(t,Eh,Float64Array)}function Eh(t){return null==t?NaN:+t}function Mh(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?zd(t):null==t||isNaN(t=+t)?void 0:new Date(t)}const Th=Math.PI,Nh=2*Th;function Ph({projection:t,inset:n=0,insetTop:e=n,insetRight:r=n,insetBottom:o=n,insetLeft:i=n}={},a){if(null==t)return;if("function"==typeof t.stream)return t;let c,u,s="frame";if(np(t)){let n;if(({type:t,domain:u,inset:n,insetTop:e=(void 0!==n?n:e),insetRight:r=(void 0!==n?n:r),insetBottom:o=(void 0!==n?n:o),insetLeft:i=(void 0!==n?n:i),clip:s=s,...c}=t),null==t)return}"function"!=typeof t&&({type:t}=function(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Ch(se,.7463,.4673);case"albers":return Rh(pe,.7463,.4673);case"azimuthal-equal-area":return Ch(ue,4,4);case"azimuthal-equidistant":return Ch(ce,Nh,Nh);case"conic-conformal":return Rh(de,Nh,Nh);case"conic-equal-area":return Rh(fe,6.1702,2.9781);case"conic-equidistant":return Rh(le,7.312,3.6282);case"equal-earth":return Ch(ae,5.4133,2.6347);case"equirectangular":return Ch(ie,Nh,Th);case"gnomonic":return Ch(oe,3.4641,3.4641);case"identity":return{type:Ih};case"reflect-y":return{type:Ah};case"mercator":return Ch(re,Nh,Nh);case"orthographic":return Ch(ee,2,2);case"stereographic":return Ch(ne,2,2);case"transverse-mercator":return Ch(te,Nh,Nh);default:throw new Error(`unknown projection type: ${t}`)}}(t));const{width:l,height:f,marginLeft:d,marginRight:p,marginTop:h,marginBottom:g}=a,v=l-d-p-i-r,y=f-h-g-e-o;if(t=t?.({width:v,height:y,clip:s,...c}),null==t)return;s=function(t,n,e,r,o){if(!1===t||null==t||"number"==typeof t)return t=>t;!0===t&&(t="frame");if("frame"===`${t}`.toLowerCase())return Qn(n,e,r,o);throw new Error(`unknown projection clip type: ${t}`)}(s,d,h,l-p,f-g);let m,b=d+i,w=h+e;if(null!=u){const[[n,e],[r,o]]=Xn(t).bounds(u),i=Math.min(v/(r-n),y/(o-e));i>0?(b-=(i*(n+r)-v)/2,w-=(i*(e+o)-y)/2,m=Zn({point(t,n){this.stream.point(t*i+b,n*i+w)}})):vh("Warning: the projection could not be fit to the specified domain; using the default scale.")}return m??=0===b&&0===w?Ih():Zn({point(t,n){this.stream.point(t+b,n+w)}}),{stream:n=>t.stream(m.stream(s(n)))}}function Ch(t,n,e){return{type:({width:r,height:o,rotate:i,precision:a=.15,clip:c})=>{const u=t();return null!=a&&u.precision?.(a),null!=i&&u.rotate?.(i),"number"==typeof c&&u.clipAngle?.(c),u.scale(Math.min(r/n,o/e)),u.translate([r/2,o/2]),u},aspectRatio:e/n}}function Rh(t,n,e){const{type:r,aspectRatio:o}=Ch(t,n,e);return{type:t=>{const{parallels:n,domain:e,width:o,height:i}=t,a=r(t);return null!=n&&(a.parallels(n),void 0===e&&a.fitSize([o,i],{type:"Sphere"})),a},aspectRatio:o}}const Ih=Kd({stream:t=>t}),Ah=Kd(Zn({point(t,n){this.stream.point(t,-n)}}));function Dh(t={},n){const{document:e=("undefined"!=typeof window?window.document:void 0)}=t;return{document:e,projection:Ph(t,n)}}function Lh(t,{document:n}){return he(ge(t).call(n.documentElement))}const qh=function(t){let n,e;return(...r)=>((e?.length!==r.length||e.some(((t,n)=>t!==r[n])))&&(e=r,n=t(...r)),n)}((t=>new Intl.NumberFormat(t)));function Fh(t){return Fd(t,"Invalid Date")}function _h(t,n){if((t=Jd(t))!==n)return t}!function(t="en-US"){const n=function(t="en-US"){const n=qh(t);return t=>null==t||isNaN(t)?void 0:n.format(t)}(t)}();const Uh=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/;function zh(t){if(void 0===t)return`plot-${Math.random().toString(16).slice(2)}`;if(t=`${t}`,!Uh.test(t))throw new Error(`invalid class name: ${t}`);return t}function Wh(t,n){if("string"==typeof n)t.property("style",n);else if(null!=n)for(const e of t)Object.assign(e.style,n)}function Bh(t){return jh(t)&&void 0===t.interval?void 0:"tabular-nums"}function Hh(t,n){if(null==n)return n;const e=t(n);if(!e)throw new Error(`scale not found: ${n}`);return e}function Gh(t,n={},e,r){let{columns:o,tickFormat:i,fontVariant:a=Bh(t),swatchSize:c=15,swatchWidth:u=c,swatchHeight:s=c,marginLeft:l=0,className:f,style:d,width:p}=n;const h=Dh(n);f=zh(f),i=function(t,n){return void 0===t?ip(n)?Fh:Jd:"function"==typeof t?t:("string"==typeof t?ip(n)?ve:ye:Kd)(t)}(i,t.domain);const g=Lh("div",h).attr("class",f).attr("style",`\n        --swatchWidth: ${+u}px;\n        --swatchHeight: ${+s}px;\n      `);let v;return null!=o?(v=`\n      .${f}-swatch {\n        display: flex;\n        align-items: center;\n        break-inside: avoid;\n        padding-bottom: 1px;\n      }\n      .${f}-swatch::before {\n        flex-shrink: 0;\n      }\n      .${f}-label {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    `,g.style("columns",o).selectAll().data(t.domain).enter().append("div").attr("class",`${f}-swatch`).call(e,t).call((t=>t.append("div").attr("class",`${f}-label`).attr("title",i).text(i)))):(v=`\n      .${f} {\n        display: flex;\n        align-items: center;\n        min-height: 33px;\n        flex-wrap: wrap;\n      }\n      .${f}-swatch {\n        display: inline-flex;\n        align-items: center;\n        margin-right: 1em;\n      }\n    `,g.selectAll().data(t.domain).enter().append("span").attr("class",`${f}-swatch`).call(e,t).append((function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))}))),g.call((t=>t.insert("style","*").text(`\n        .${f} {\n          font-family: system-ui, sans-serif;\n          font-size: 10px;\n          margin-bottom: 0.5em;${void 0===l?"":`\n          margin-left: ${+l}px;`}${void 0===p?"":`\n          width: ${p}px;`}\n        }\n        ${r(f)}\n        ${v}\n      `))).style("font-variant",_h(a,"normal")).call(Wh,d).node()}const Vh=new Map([["symbol",function(t,{fill:n=(void 0!==t.hint?.fill?t.hint.fill:"none"),fillOpacity:e=1,stroke:r=(void 0!==t.hint?.stroke?t.hint.stroke:fp(n)?"currentColor":"none"),strokeOpacity:o=1,strokeWidth:i=1.5,r:a=4.5,...c}={},u){const[s,l]=Xd(n),[f,d]=Xd(r),p=Hh(u,s),h=Hh(u,f),g=a*a*Math.PI;return e=Zd(e)[1],o=Zd(o)[1],i=Zd(i)[1],Gh(t,c,(n=>n.append("svg").attr("viewBox","-8 -8 16 16").attr("fill","color"===s?t=>p.scale(t):null).attr("stroke","color"===f?t=>h.scale(t):null).append("path").attr("d",(n=>{const e=be();return t.scale(n).draw(e,g),e}))),(t=>`.${t}-swatch > svg {\n        width: var(--swatchWidth);\n        height: var(--swatchHeight);\n        margin-right: 0.5em;\n        overflow: visible;\n        fill: ${l};\n        fill-opacity: ${e};\n        stroke: ${d};\n        stroke-width: ${i}px;\n        stroke-opacity: ${o};\n      }`))}],["color",Jh],["opacity",function({type:t,interpolate:n,...e},{legend:r=!0,color:o=we(0,0,0),...i}){if(!n)throw new Error(`${t} opacity scales are not supported`);!0===r&&(r="ramp");if("ramp"!==`${r}`.toLowerCase())throw new Error(`${r} opacity legends are not supported`);return Jh({type:t,...e,interpolate:Kh(o)},{legend:r,...i})}]]);function Yh(t,{label:n,ticks:e,tickFormat:r}={},o){return function(t={},...n){let e=t;for(const r of n)for(const n in r)if(void 0===e[n]){const o=r[n];e===t?e={...e,[n]:o}:e[n]=o}return e}(o,t,{label:n,ticks:e,tickFormat:r})}function Jh(t,{legend:n=!0,...e}){if(!0===n&&(n="ordinal"===t.type?"swatches":"ramp"),void 0!==t.domain)switch(`${n}`.toLowerCase()){case"swatches":return function(t,n){if(!jh(t)&&!function({type:t}){return"threshold"===t}(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return Gh(t,n,((t,n)=>t.append("svg").attr("fill",n.scale).append("rect").attr("width","100%").attr("height","100%")),(t=>`.${t}-swatch svg {\n        width: var(--swatchWidth);\n        height: var(--swatchHeight);\n        margin-right: 0.5em;\n      }`))}(t,e);case"ramp":return function(t,n){let{label:e=t.label,tickSize:r=6,width:o=240,height:i=44+r,marginTop:a=18,marginRight:c=0,marginBottom:u=16+r,marginLeft:s=0,style:l,ticks:f=(o-s-c)/64,tickFormat:d,fontVariant:p=Bh(t),round:h=!0,className:g}=n;const v=Dh(n);g=zh(g),null===d&&(d=()=>null);const y=Lh("svg",v).attr("class",g).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",o).attr("height",i).attr("viewBox",`0 0 ${o} ${i}`).call((t=>t.append("style").text(`\n        .${g} {\n          display: block;\n          background: white;\n          height: auto;\n          height: intrinsic;\n          max-width: 100%;\n          overflow: visible;\n        }\n        .${g} text {\n          white-space: pre;\n        }\n      `))).call(Wh,l);let m,b=t=>t.selectAll(".tick line").attr("y1",a+u-i);const w=h?(t,n)=>t.rangeRound(n):(t,n)=>t.range(n),{type:S,domain:j,range:$,interpolate:O,scale:k,pivot:x}=t;if(O){const t=void 0===$?O:En(1===O.length?Xp(O):O,$);m=w(k.copy(),W(sn(s,o-c),Math.min(j.length+(void 0!==x),void 0===$?1/0:$.length)));const n=256,e=v.document.createElement("canvas");e.width=n,e.height=1;const r=e.getContext("2d");for(let e=0,o=n-1;e<n;++e)r.fillStyle=t(e/o),r.fillRect(e,0,1,1);y.append("image").attr("x",s).attr("y",a).attr("width",o-s-c).attr("height",i-a-u).attr("preserveAspectRatio","none").attr("xlink:href",e.toDataURL())}else if("threshold"===S){const t=j,n=void 0===d?t=>t:"string"==typeof d?ye(d):d;m=w(nn().domain([-1,$.length-1]),[s,o-c]),y.append("g").selectAll().data($).enter().append("rect").attr("x",((t,n)=>m(n-1))).attr("y",a).attr("width",((t,n)=>m(n)-m(n-1))).attr("height",i-a-u).attr("fill",(t=>t)),f=tp(t,((t,n)=>n)),d=e=>n(t[e],e)}else m=w(Gn().domain(j),[s,o-c]),y.append("g").selectAll().data(j).enter().append("rect").attr("x",m).attr("y",a).attr("width",Math.max(0,m.bandwidth()-1)).attr("height",i-a-u).attr("fill",k),b=()=>{};return y.append("g").attr("transform",`translate(0,${i-u})`).call(me(m).ticks(Array.isArray(f)?null:f,"string"==typeof d?d:void 0).tickFormat("function"==typeof d?d:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",_h(p,"normal")).call(b).call((t=>t.select(".domain").remove())),void 0!==e&&y.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(e),y.node()}(t,e);default:throw new Error(`unknown legend type: ${n}`)}}function Kh(t){const{r:n,g:e,b:r}=we(t)||we(0,0,0);return t=>`rgba(${n},${e},${r},${t})`}var Xh="#ch-plugin-legend",Zh={enabled:!0,itemSelector:null,label:null,width:130},Qh=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.name="Legend",this.calendar=t,this.root=null,this.shown=!1,this.options=Zh}var e,r,o;return e=n,r=[{key:"setup",value:function(t){this.options=Object.assign(Object.assign({},Zh),t)}},{key:"paint",value:function(){var n=this.calendar.options.options.scale,e=this.options,r=e.enabled,o=e.itemSelector;if(!r||o&&t(o).empty())return this.destroy();this.shown=!0,this.root=t(o||this.calendar.options.options.itemSelector),this.root.select(Xh).empty()?this.root=this.root.append("div").attr("id",Xh.slice(1)):this.root=this.root.select(Xh);var i=function(t={}){for(const[n,e]of Vh){const r=t[n];if(ep(r)){const o=Dh(t);let i;if("symbol"===n){const{fill:n,stroke:e=(void 0===n&&ep(t.color)?"color":void 0)}=t;i={fill:n,stroke:e}}return e(yh(n,r,i),Yh(o,r,t),(n=>ep(t[n])?yh(n,t[n]):null))}}throw new Error("unknown legend type; no scale found")}(Object.assign(Object.assign({},n),this.options));return this.root.selectAll("*").remove(),this.root.append((function(){return i})),Promise.resolve()}},{key:"destroy",value:function(){return null!==this.root&&(this.root.remove(),this.root=null),Promise.resolve()}}],r&&Se(e.prototype,r),o&&Se(e,o),Object.defineProperty(e,"prototype",{writable:!1}),n}();export{Qh as default};//# sourceMappingURL=Legend.min.esm.js.map
